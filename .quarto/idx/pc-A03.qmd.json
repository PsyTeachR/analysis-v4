{"title":"2A Lab 3 Week 4","markdown":{"headingText":"2A Lab 3 Week 4 ","headingAttr":{"id":"","classes":["unnumbered"],"keyvalue":[]},"containsRefs":false,"markdown":"\n\n```{r include=FALSE}\nlibrary(webexercises)\n```\n\n**This is the pair coding activity related to @sec-wrangling2.**\n\n\n\n```{r reading in data for me, echo=FALSE, message=FALSE}\nlibrary(tidyverse)\n\ndog_data_raw <- read_csv(\"data/dog_data_raw.csv\")\n```\n\nWe will once again be working with data from Binfet et al. (2021), which focuses on the randomised controlled trials data involving therapy dog interventions. Today, our goal is to calculate the average `Loneliness` score for each participant measured at time point 1 (pre-intervention) using the raw data file `dog_data_raw`. Currently, the data looks like this:\n\n```{r echo=FALSE}\nloneliness_brief <- dog_data_raw %>% \n  select(RID, starts_with(\"L1\"))\n\nhead(loneliness_brief, n = 5)\n```\n\n<p></p>\n\nBut we want the data to look like this:\n\n```{r echo=FALSE}\nloneliness_tidy <- dog_data_raw %>% \n  select(RID, starts_with(\"L1\")) %>% \n  pivot_longer(cols = -RID, names_to = \"Names\", values_to = \"Response\") %>% \n  mutate(Score_corrected = case_when(\n    Names %in% c(\"L1_1\", \"L1_5\", \"L1_6\", \"L1_9\", \"L1_10\", \"L1_15\", \"L1_16\", \"L1_19\", \"L1_20\") ~ 5-Response,\n    .default = Response\n    )) %>% \n  group_by(RID) %>% \n  summarise(Loneliness_pre = mean(Score_corrected, na.rm = TRUE)) %>% \n  ungroup()\n\nhead(loneliness_tidy, n = 5)\n```\n\nThis task is a bit more challenging compared to last week's lab activity, as the Loneliness scale includes some reverse-coded items.\n\n## Task 1: Open the R project for the lab {.unnumbered}\n\n## Task 2: Open your `.Rmd` file from last week or create a new `.Rmd` file {.unnumbered}\n\nYou could continue the `.Rmd` file you used last week, or create a new `.Rmd`. If you need some guidance, have a look at @sec-rmd.\n\n## Task 3: Load in the library and read in the data {.unnumbered}\n\nThe data should already be in your project folder. If you want a fresh copy, you can download the data again here: [data_pair_coding](data/data_pair_coding.zip \"download\").\n\nWe are using the package `tidyverse` today, and the datafile we should read in is `dog_data_raw.csv`.\n\n::: {.callout-note collapse=\"true\" icon=\"false\"}\n\n## Hint\n\n```{r eval=FALSE}\n# loading tidyverse into the library\nlibrary(???)\n\n# reading in `dog_data_raw.csv`\ndog_data_raw <- read_csv(\"???\")\n```\n\n:::\n\n## Task 4: Calculating the mean for `Loneliness_pre` {.unnumbered}\n\n* **Step 1**: Select all relevant columns, such as the participant ID and all 20 items of the `Loneliness` questionnaire completed by participants before the intervention. Store this data in an object called `data_loneliness`.\n\n::: {.callout-note collapse=\"true\" icon=\"false\"}\n\n## Hint\n\nLook at the codebook. Try to figure out\n\n* the variable name of the column in which the participant id is stored, and\n* which items relate to the Loneliness scale at Stage \"pre\"\n\n::: {.callout-note collapse=\"true\" icon=\"false\"}\n\n## More concrete hint\n\n* the participant id column is called `RID`\n* The Loneliness items at pre-intervention stage start with `L1_`\n\n:::\n\n:::\n\n* **Step 2**: Pivot the data from wide format to long format so we can reverse-score and calculate the average score more easily (in step 3)\n\n::: {.callout-note collapse=\"true\" icon=\"false\"}\n\n## Hint\n\n`pivot_`\n\nWe also need 3 arguments in that function:\n\n* the columns we want to select (e.g., all the loneliness items),\n* the name of the column in which the current column headings will be stored (e.g., \"Qs\"), and\n* the name of the column that should store all the values (e.g., \"Responses\").\n\n::: {.callout-note collapse=\"true\" icon=\"false\"}\n\n## More concrete hint\n\n```{r eval=FALSE}\n  pivot_longer(cols = ???, names_to = \"???\", values_to = \"???\")\n```\n\n:::\n\n:::\n\n* **Step 3**: Reverse-scoring\n\nIdentify the items on the `Loneliness` scale that are reverse-coded, and then reverse-score them accordingly.\n\n::: {.callout-note collapse=\"true\" icon=\"false\"}\n\n## Hint\n\nWe need to figure out:\n\n* which are the items of the loneliness scale we need to reverse-score\n* what is the measuring scale of loneliness so we can determine the new values\n* which function to use to create a new column that has the corrected scores in it\n* which one of the `case_` functions will get us there\n\n::: {.callout-note collapse=\"true\" icon=\"false\"}\n\n## More concrete hint\n\n* The items to be reverse-coded items can be found in the codebook: L1_1, L1_5, L1_6, L1_9, L1_10, L1_15, L1_16, L1_19, L1_20\n* the loneliness scale ranges from 1 to 4, so we need to replace 1 with 4, 2 with 3, 3 with 2, and 4 with 1\n* the function to create a new column `mutate()`\n* it's a conditional statement rather than \"just\" replacing values, hence we need `case_when()`\n\n```{r eval=FALSE}\n  mutate(Score_corrected = case_when(\n    ??? ~ ???,\n    .default = ???\n    ))\n```\n\n:::\n\n:::\n\n* **Step 4**: Calculate the average Loneliness score per participant. To match with the table above, we want to call this column `Loneliness_pre`\n\n::: {.callout-note collapse=\"true\" icon=\"false\"}\n\n## Hint\n\ngrouping and summarising\n\n::: {.callout-note collapse=\"true\" icon=\"false\"}\n\n## More concrete hint\n\n```{r eval=FALSE}\n  group_by(???) %>% \n  summarise(Loneliness_pre = ???(???)) %>% \n  ungroup()\n```\n\n:::\n\n:::\n\n::: {.callout-caution collapse=\"true\" icon=\"false\"}\n\n## Solution\n\n```{r eval=FALSE}\n# loading tidyverse into the library\nlibrary(tidyverse)\n\n# reading in `dog_data_raw.csv`\ndog_data_raw <- read_csv(\"dog_data_raw.csv\")\n\n# Task 4: Tidying \nloneliness_tidy <- dog_data_raw %>% \n  # Step 1\n  select(RID, starts_with(\"L1\")) %>% # select(RID, L1_1:L1_20) also works\n  # Step 2\n  pivot_longer(cols = -RID, names_to = \"Qs\", values_to = \"Response\") %>% \n  # Step 3\n  mutate(Score_corrected = case_when(\n    Qs %in% c(\"L1_1\", \"L1_5\", \"L1_6\", \"L1_9\", \"L1_10\", \"L1_15\", \"L1_16\", \"L1_19\", \"L1_20\") ~ 5-Response,\n    .default = Response\n    )) %>% \n  # Step 4\n  group_by(RID) %>% \n  summarise(Loneliness_pre = mean(Score_corrected, na.rm = TRUE)) %>% \n  ungroup()\n```\n\n:::\n\n**If you’d like to practise your data wrangling skills further, you can try the “Challenge yourself” scenarios at the end of @sec-wrangling2.**\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"kable","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":false,"code-overflow":"wrap","code-link":false,"code-line-numbers":true,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["https://use.fontawesome.com/releases/v5.13.0/css/all.css","include/booktem.css","include/webex.css","include/glossary.css","include/style.css","include/custom.scss","include/styles.css"],"highlight-style":"a11y","include-after-body":["include/webex.js","include/script.js"],"output-file":"pc-A03.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.5.57","lightbox":true,"bibliography":["include/references.bib"],"csl":"include/apa.csl","theme":{"light":["flatly","include/light.scss"],"dark":["darkly","include/dark.scss"]},"code-annotations":false,"anchor-sections":false,"code-copy":"hover","mainfont":"","monofont":""},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}